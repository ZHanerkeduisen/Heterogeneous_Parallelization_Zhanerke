Zhanerke Duisen, ADA - 2403M

Practice 4 (Practice4.ipynb) - все задачи в одном коде

Блок-схемы в файле "Practice4.drawio.png"

Ответы на контрольные вопросы в файле "Контрольные вопросы practice4.docx"

Описание:

Программа реализует следующие этапы:

1. **Генерация массива случайных чисел**
   - Размер массива задается как параметр: 10 000, 100 000, 1 000 000 элементов.  
   - Используется CPU для генерации случайных чисел.  

3. **Редукция суммы элементов массива**  
   Реализованы два варианта:
   - Только глобальная память (Global memory): 
     Каждый поток выполняет атомарное сложение своего элемента в глобальную память. Этот способ медленный из-за высокой задержки глобальной памяти и большого числа атомарных операций.  
   - Комбинация глобальной и разделяемой памяти (Shared memory):
     Каждый блок потоков сначала копирует свои элементы в разделяемую память блока, затем выполняется параллельная редукция внутри блока. Финальный результат блока записывается в глобальную память через атомарную операцию. Такой подход значительно сокращает обращения к глобальной памяти и повышает скорость выполнения.

4. **Сортировка подмассивов (Bubble Sort)**  
   - Каждый блок потоков сортирует свой подмассив с использованием локальной памяти (регистров) для временных переменных.  
   - Локальная память обеспечивает быстрый доступ к данным для каждой нити и уменьшает обращения к глобальной памяти.

5. **Слияние отсортированных подмассивов**  
   - Используется разделяемая память для копирования блоков данных, параллельного их слияния и записи обратно в глобальную память.  
   - Это ускоряет операцию слияния, так как доступ к разделяемой памяти гораздо быстрее, чем к глобальной.

6. **Замер времени выполнения**  
   - Для всех этапов измеряется время выполнения с помощью "chrono::high_resolution_clock".  
   - Результаты выводятся для каждого размера массива, что позволяет наглядно увидеть эффект оптимизации.


<img width="940" height="843" alt="image" src="https://github.com/user-attachments/assets/e716951f-1d2c-4786-b30e-b031aedfc162" />

<img width="857" height="573" alt="image" src="https://github.com/user-attachments/assets/3a8ec9dd-844b-4a4a-b78e-2a50fa0e0795" />

Результат: 
Редукция только глобальная память:
Медленная при малых массивах (10 000 элементов) из-за большого числа атомарных операций в глобальной памяти.

Редукция с использованием разделяемой памяти:
Существенно быстрее для маленьких массивов — основная часть вычислений выполняется внутри блока в быстрой shared memory. Количество обращений к глобальной памяти уменьшается.

Сортировка подмассивов с локальной памятью:
Использование регистров потоков ускоряет сортировку, так как операции происходят внутри потоков без обращений к глобальной памяти.

Слияние с разделяемой памятью:
Позволяет блокам одновременно обрабатывать данные, снижая задержки при доступе к памяти и ускоряя слияние.

_____________________________________________________________________________________________________________________

# Компиляция и запуск в Google Colab:

 Сохраняем программу в файл
%%writefile assignment3.cu
[код программы]

 Компилируем
!nvcc assignment3.cu -o assignment3

 Запускаем
!./assignment3
