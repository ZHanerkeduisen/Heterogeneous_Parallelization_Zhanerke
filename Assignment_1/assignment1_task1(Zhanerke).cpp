// Задание 1
// 1. Создать динамический массив из 50 000 целых чисел
// 2. Заполнить массив случайными значениями от 1 до 100
// 3. Вычислить среднее значение
// 4. Освободить память, выделенную под массив

#include <iostream>     // Для работы с вводом/выводом (cout, cin, endl)
#include <random>       // Для генерации случайных чисел (random_device, mt19937, uniform_int_distribution)      
using namespace std;    // Стандартное пространство имён, чтобы не писать std:: перед cout, endl и т.д.

int main() {            // Основная функция
    // Размер массива
    const int SIZE = 50000;       // Объявляем константу SIZE — размер массива. Используем const, чтобы размер нельзя было случайно изменить в программ
    // Динамическое выделение памяти
    int* arr = new int[SIZE];     // int* - указатель на int
                                  // new int[SIZE] - выделяем память   
                                  // Создаём динамический массив типа int с размером SIZE (50000)

    // Настройка генератора случайных чисел
    random_device rd;                  // random_device используется как источник случайности
    mt19937 gen(rd());                 // mt19937 — генератор случайных чисел Mersenne Twister
                                       // Инициализируем его значением из rd(), чтобы последовательность была случайной
    
    uniform_int_distribution<int> dist(1, 100);    // uniform_int_distribution задаёт равномерное распределение чисел от 1 до 100
                                                   // dist(gen) будет возвращать случайное число из этого диапазона


    // Заполнение массива случайными числами
    for (int i = 0; i < SIZE; ++i) {  // ++i используется для увеличения i перед следующей итерацией (префиксный инкремент)
               arr[i] = dist(gen);    // Для каждого индекса i от 0 до SIZE-1 генерируем случайное число dist(gen) и записываем его в массив 
    }

    
    // Вывод первых 100 элементов массива
    cout << "Первые 100 элементов массива:\n";  // Выводим заголовок перед числами

    for (int i = 0; i < 100 && i < SIZE; ++i) {  // Проходим максимум по 100 элементам или меньше, если SIZE < 100
        cout << arr[i] << " ";                   // Выводим текущий элемент массива, разделяя пробелом
    }
    cout << "\n...\n";                           // Выводим многоточие, чтобы показать, что остальные элементы не отображаются
                                                 // Это предотвращает захламление консоли большим массивом

    
    // Вычисление среднего значения элементов массива
    long long sum = 0;                // Создаём переменную sum типа long long для хранения суммы элементов
                                      // Используем long long, чтобы избежать переполнения при суммировании 50 000 чисел
    for (int i = 0; i < SIZE; ++i) {    
        sum += arr[i];                // Для каждого элемента массива добавляем его значение к sum
    }

    double average = static_cast<double>(sum) / SIZE;   // Преобразуем sum в тип double и делим на SIZE, чтобы получить среднее значение с плавающей точкой
                                                        // static_cast<double> гарантирует точное деление, иначе результат был бы целым числом

    cout << "Среднее значение = " << average << endl;   // Выводим среднее значение на экран


    // Освобождение динамической памяти
    delete[] arr;                     // Освобождаем память, выделенную под массив, чтобы избежать утечки памяти
                                      // Используем [] после delete, так как массив был выделен через new[]
    return 0;                         // Возвращаем 0, что означает успешное завершение программы
}                                     // Конец основной функции (main)

